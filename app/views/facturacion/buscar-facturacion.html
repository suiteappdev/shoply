<div ng-controller="DevolucionesCtrl" ng-init="load()">
	<div class="row">
	<h3>Buscar Facturación</h3>
	<div class="panel panel-default" style="padding:0px;">
	  <div class="panel-body">
	  <div class="row">
		<div class="col-lg-3">
			<label>Factura de de venta n° :</label>
		    <input  focus-on="true" type="text" ng-keypress="findByCode($event)" class="form-control" ng-model="form.data.factura" placeholder="Codigo de Factura"/>
		</div>
			<div class="col-lg-3">
				<label>Fecha Inicial :</label>
			    <ng-datepicker ng-model="form.data.ini" placeholder="Fecha inicial" locale="ES" format="YYYY-MM-DD" view-format="YYYY-MM-DD">
			</div>
			<div class="col-lg-3">
				<label>Fecha Final :</label>
			    <ng-datepicker ng-model="form.data.end" placeholder="Fecha final" locale="ES" format="YYYY-MM-DD" view-format="YYYY-MM-DD">
			</div>
			<div class="col-lg-3">
				<div class="input-group">
					<label>Cliente</label>
		            <cliente-field key="_id" label="full_name" ng-model="form.data._client"></cliente-field>
					<span class="input-group-btn">
						<button ng-click="find()" class="btn custom-btn-primary" style="top: 13px;" type="button"><i class="glyphicon glyphicon-search"></i></button>
					</span>
				</div>
			</div>	  	
	  </div>
	  <div class="table-responsive">
		 <table class="table table-hover">
			<thead>
				<th>Factura</th>
				<th>Cliente</th>
				<th>Vendedor</th>
				<th>Productos</th>
				<th>Total</th>
				<th>Fecha</th>
				<th></th>
			</thead>
			<tbody>
				<tr ng-show="devolucionesRecords.length == 0 || !devolucionesRecords"><td class="text-center" colspan="8"><p><i style="top: 4px!important;
" class="glyphicon glyphicon-info-sign"></i>&nbsp; Sin resultados.</p></p></td></tr>
				<tr dir-paginate="record in devolucionesRecords |filter:search |itemsPerPage: 5 "  pagination-id="devolucionEntity">
					<td class="">{{record.id}}</td>
					<td>{{(record._client.data.nit == 10001 ? 'Ventas Diarias' : (record._client.name +' ' +record._client.last_name))}}</td>
					<td>{{(record._seller.name +' ' +record._seller.last_name)}}</td>
					<td>{{record._product.length}}</td>
					<td>{{record.data.total | currency:"$ "}} </td>
					<td>{{record.createdAt | date:'yyyy-MM-dd hh:mm a'}}</td>
					<td style="width:50px;" style="top: 3px;" class="text-right"><a ng-click="remove()" class="custom-btn-tiny btn-block btn-danger"><i class="glyphicon glyphicon-trash"></i>&nbsp;Quitar</a></td>
					<td style="width:50px;" style="top: 3px;" class="text-right"><a class="custom-btn-tiny btn-block custom-btn-primary"  ng-click="printA(record)"><i class="glyphicon glyphicon-print"></i>&nbsp;Imprimir Factura</a></td>  
					<td style="width:50px;" style="top: 3px;" class="text-right"><a ui-sref="dashboard.editar-facturacion({facturacion : record._id})" href="!#/editar-facturacion/{{record._id}}" class="custom-btn-tiny btn-block custom-btn-primary"><i class="glyphicon glyphicon-transfer"></i>&nbsp;Enviar a Facturacion</a></td> 
				</tr>
			</tbody>
		</table>	  	
	  </div>
		<div class="row">
			<div class="col-lg-12">
				<dir-pagination-controls class="pull-right" pagination-id="devolucionEntity"></dir-pagination-controls>
			</div>
		</div>
		<div class="row" ng-show="devolucionesRecords.length == 1">
			<div class="col-lg-12">
				<div class="form-group"></div>
				<div class="form-group">
					<div class="btn-group">
					  <button type="button" class="btn custom-btn-primary" ng-click="printA(devolucionesRecords[0])">
					  <i class="glyphicon glyphicon-print"></i>&nbsp;Imprimir Factura.</button>
					</div>
				</div>
		  	</div>			
		</div>
	  </div>
	  <div class="panel-footer">Facturas modificadas recientemente</div>
	</div>

	</div>
</div>
