<div ng-init="load()">

	<div class="row">
		<div class="sp-sub-header" style="height:60px;background-color: #00232d;box-sizing: border-box;
	padding: 10px;">	
			<form name="arqueoForm">
					<div class="col-lg-3 row">
					   <vendedor-field ng-init="formData._seller = _sellerParam" ng-model="formData._seller" key="_id" label="name"><vendedor-field>
					</div>
					<div class="col-lg-3">
						<ng-datepicker ng-model="formData.ini" placeholder="Fecha Inicial" locale="ES" format="YYYY-MM-DD" view-format="YYYY-MM-DD">
					</div>
					<div class="col-lg-3">
						  <ng-datepicker ng-model="formData.end" placeholder="Fecha Final" locale="ES" format="YYYY-MM-DD" view-format="YYYY-MM-DD">
					</div>
					<div class="col-lg-3">
						  <button ng-click="find()" class="btn custom-btn-primary" type="button"><i class="glyphicon glyphicon-search"></i></button>
					</div>
			</form>
		</div>
		<div ng-show="form._billings.length > 0" style="background-color: rgb(1, 23, 29);height: auto;width: 100%;
    height: 50px;">
					<div class="col-lg-2">
						<label class="text-white">Faltante</label>
						<h4 class="no-margin" style="color:gray;!important;position: relative;">{{form.metadata.faltante | currency:"$ "}}</h4>
					</div>
					<div class="col-lg-2">
						<label class="text-white">Sobrante</label>
						<h4 class="text-white no-margin" style="color: gray!important;position: relative;">{{form.metadata.sobrante | currency:"$ "}}</h4>
					</div>
					<div class="col-lg-3">
						<label class="text-white">Total Sistema</label>
						<h4 class="text-white no-margin" style="color: gray!important;position: relative;">{{form.metadata.total_sistema || 0 | currency:"$ "}}</h4>
					</div>
					<div class="col-lg-5">
					<div class="row">
						<div class="col-lg-8">
							<div class="form-group">
								<input style="top: 8px;position: relative;text-align:center;" type="number" ng-model="form.metadata.total_efectivo" class="form-control" placeholder="Efectivo">							
							</div>							
						</div>
						<div class="col-lg-4">
								<!-- Split button -->
								<div class="btn-group" style="position: relative;top: 8px;">
								  <button type="button" class="btn custom-btn-primary" ng-click="guardar()">Guardar</button>
								  <button type="button" class="btn custom-btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								    <span class="caret"></span>
								    <span class="sr-only">Toggle Dropdown</span>
								  </button>
								  <ul class="dropdown-menu">
								    <li><a  ng-click="" ><i class="glyphicon glyphicon-envelope"></i> &nbsp;Email</a></li>
								    <li><a ng-click="download()"><i class="glyphicon glyphicon-download"></i> &nbsp;Descargar</a></li>
								  </ul>
								</div>
						</div>
					</div>
				</div>
					<div class="col-lg-12 content">
					        <div class="hpanel">
					            <div class="panel-body">
									<div class="col-lg-6 hidden">
										<h1 style="font-size:20px;">Numero de Registros</h1>
										<h3 style="font-size:60px;">{{form._billings.length}}</h3>
										<table class="table table-hover">
										    <thead>
										      <tr>
										        <th>Forma de Pago</th>
										        <th style="text-align:right;">Valor</th>
										      </tr>
										    </thead>
										    <tbody>
										      <tr>
										        <td>Efectivo</td>
										        <td>10.000.00</td>
										      </tr>
										    </tbody>
										  </table>
									</div>
									<div class="col-lg-2">
										<h1 style="font-size:14px;">Numero de Registros</h1>
										<h3 style="font-size:20px;">{{form._billings.length}}</h3>
									</div>
					                <div class="table-responsive">
										<table class="table table-hover">
										    <thead>
										      <tr>
										        <th>Codigo</th>
										        <th>Vendedor</th>
										        <th>Cliente</th>
										        <th>Cantidad</th>
										        <th>Total</th>
										        <th>SubTotal</th>
										        <th>% Descuento</th>
										        <th>Valor Descuento</th>
										        <th style="width: 36px;"></th>
										      </tr>
										    </thead>
										    <tbody>
										      <tr  dir-paginate="record in form._billings | filter:search |itemsPerPage: 5 "  pagination-id="ArqueosEntity">
										        <td><span class="label label-primary">{{record.idcomposed}}</span></td>
										        <td>{{record._seller.full_name.toLowerCase()}}</td>
										        <td>{{record._client.full_name.toLowerCase()}}</td>
										        <td>{{record._product.length}}</td>
										        <td>{{record.data.total  | currency:"$ "}}</td>
										        <td>{{record.data.subtotal  | currency:"$ "}}</td>
										        <td>{{record.data.descuentoGlobal  || 0}}</td>
										        <td>{{record.data.valorDescuentoGlobal  || 0 | currency:"$ "}}</td>
										        <td><button ng-click="verImpuestos()" type="button" class="btn btn-success btn-xs"><i class="glyphicon glyphicon-eye-open"></i>&nbsp;Ivas</button></td>
										      </tr>
										    </tbody>
										  </table>
					                </div>
									<div class="col-lg-12">
										<dir-pagination-controls class="pull-right" pagination-id="ArqueosEntity"></dir-pagination-controls>
									</div>
					            </div>
					            <div class="panel-footer">
					                Facturaciones
					            </div>
					        </div>
					    </div>
	</div>
	  <div class="content" ng-hide="form._billings.length > 0">
	    <div class="table_wrap table_height">
	      <div class="row table-responsive table_inner">
	          <p class="text-center" ng-show="Records">
	           <img style="width:50px;" src="images/loading.svg">
	          </p>
	          <h3 ng-hide="Records || form._billings.length > 0">0 Resultados debe iniciar una busqueda.</h3>
	      </div>
	    </div>  
	  </div>
	  <div class="sp-action-footer"></div>
</div>
