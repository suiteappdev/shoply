<div ng-init="load()">
  <div class="content" ng-show="!records || records.length == 0">
    <div class="table_wrap table_height">
      <div class="row table-responsive table_inner">
          <div class="controls" ng-show="records.length == 0 && Records">
            <h4 >No hay registros para mostrar</h4>
          </div>
          <p class="text-center" ng-show="!Records">
           <img style="width:50px;" src="images/loading.gif">
          </p>
      </div>
    </div>  
  </div>
    <div class="row" ng-show="records.length > 0">
    <ul class="sp-list"> 
      <li  ng-click="$root.grid.value = record;" choice="$root.grid.selected" value="record._id" class="sp-list-item sp-choice" dir-paginate="record in records |filter:search |itemsPerPage: 5 ">
        <div class="sp-item-image">
          <img ng-src="{{record.data.gallery[0].URL}}">
        </div>
        <span class="sp-meta-right">Creado : {{record.createdAt | date:'yyyy-MM-dd'}}</span>
        <a class="trash" ng-click="delete()" href=""><i class="glyphicon glyphicon-trash"></i></a>
        <h4>{{record.data.empresa}}</h4>
        <p>{{record.data.descripcion}}</p>
        <p class="sp-text">Dir:&nbsp;{{record.data.direccion}}&nbsp;&nbsp;</p>
        <p class="sp-text">Tel:&nbsp;{{record.data.telefono}}&nbsp;&nbsp;</p>
        <p class="sp-text">Cel:&nbsp;{{record.data.celular}}&nbsp;&nbsp;</p>
        <p class="sp-text">Fax:&nbsp;{{record.data.fax}}&nbsp;&nbsp;</p>
        <span style="position: absolute;top: 4px;right: 117px;" class="label label-success" ng-show="$root.user._company._id == record._id">Actualmente en uso</span>
        <div class="row">
          <div class="sp-footer">

          </div>
        </div>
      </li>
    </ul>
    <div class="col-lg-12">
      <dir-pagination-controls class="pull-right"></dir-pagination-controls>
    </div>
        <h3 class="hidden">Empresas</h3>
        <div class="hidden panel panel-default" style="padding:0px;">
          <div class="panel-body">
          <div class="col-lg-12">
              <div class="form-group pull-right">
                <button ng-disabled="$root.permissionService.canCreate('mnuEmpresas')" class="custom-btn custom-btn-primary large-rounded" ng-click="agregar()"><i class="glyphicon glyphicon-plus"></i>&nbsp;Agregar</button>
              </div>
          </div>
          <div class="row">
                <div class="col-lg-6">
                    <div class="input-group">
                          <input type="text" ng-model="search" class="form-control" placeholder="Buscar">
                          <span class="input-group-btn">
                            <button class="btn custom-btn-primary" type="button">Buscar</button>
                          </span>
                    </div>
                </div>      
          </div>
          <div class="table-responsive">
             <table class="table table-hover">
                <thead>
                    <th>Nit</th>
                    <th>Empresa</th>
                    <th>Departamento</th>
                    <th>Ciudad</th>
                    <th>Direcci√≥n</th>
                    <th>Celular</th>
                    <th>Telefono</th>
                    <th></th>
                    <th></th>
                    <th></th>
                </thead>
                <tbody>
                    <tr dir-paginate="record in records |filter:search |itemsPerPage: 5 ">
                        <td>{{record.data.nit }}</td>
                        <td>{{record.data.empresa }}</td>
                        <td>{{record.data.departamento}}</td>
                        <td>{{record.data.ciudad}}</td>
                        <td>{{record.data.direccion || 'no definido'}}</td>
                        <td>{{record.data.celular || 'no definido'}}</td>
                        <td>{{record.data.telefono || 'no definido'}}</td>
                        <td style="width:50px;" class="text-right"><a ui-sref="dashboard.detalle_empresa({empresa: record._id})" class="custom-btn-tiny custom-btn-primary" href="#/detalle-empresa/{{record._id}}">Detalle</a></td>
                        <td style="width:50px;" class="text-right"><a ng-disabled="!$root.permissionService.canUpdate('mnuEmpresa')" class="custom-btn-tiny btn-primary" ng-click="edit()"><i class="glyphicon glyphicon-edit"></i>&nbsp;Editar</a></td>
                        <td style="width:50px;" class="text-right"><a ng-disabled="!$root.permissionService.canDelete('mnuEmpresa')" ng-click="borrar()" class="custom-btn-tiny btn-danger"><i class="glyphicon glyphicon-trash">&nbsp;Borrar</i></a></td>
                        <td style="width:50px;" class="text-right"><a ng-disabled="!$root.permissionService.canDelete('mnuEmpresa')" ng-click="connectCompany(record)" class="custom-btn-tiny btn-success"><i class="glyphicon glyphicon-transfer">&nbsp;Conectar</i></a></td>
                    </tr>
                </tbody>
            </table>            
          </div>
            <div class="row">
                <div class="col-lg-12">
                    <dir-pagination-controls class="pull-right"></dir-pagination-controls>
                </div>
            </div>
          </div>
          <div class="panel-footer">Listado de Empresas</div>
        </div>

    </div>
</div>
