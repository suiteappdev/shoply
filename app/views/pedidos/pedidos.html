<div ng-controller="RequestCtrl" ng-init="load()">
  <div class="content" ng-show="records.length == 0">
    <div ng-class="records.length == 0 ? 'table_wrap table_height' : ''">
      <div ng-class="records.length == 0 ? 'row table-responsive table_inner' : 'row'">
          <div class="controls" ng-show="records.length == 0 && Records">
            <h4 >No hay registros para mostrar</h4>
          </div>
          <p class="text-center" ng-show="!Records">
           <img style="width:50px;" src="images/loading.gif">
          </p>
      </div>
    </div>  
  </div>
	<div class="row" ng-show="records.length > 0">
		<h3>Pedidos</h3>
		<div class="panel panel-default" style="padding:0px;">
		  <div class="panel-body">
			  <div class="row">
					<div class="col-lg-6">
						<div class="input-group">
						      <input type="text" class="form-control" ng-model="search" placeholder="Buscar">
						      <span class="input-group-btn">
						        <button class="btn custom-btn-primary" type="button">Buscar</button>
						      </span>
				    	</div>
					</div>
					<div class="col-lg-6">
					     <estado-pedido ng-model="estado"></estado-pedido>
					</div>
			  </div>
				 <table class="table table-hover">
					<thead>
						<th>Cliente</th>
						<th>Email</th>
						<th>Barrio</th>
						<th>Ciudad</th>
						<th>Direcci√≥n</th>
						<th>Fecha</th>
						<th>Estado</th>
						<th>Total</th>
						<th></th>
						<th></th>
					</thead>
					<tbody>
						<tr dir-paginate="record in records | orderBy: '-createdAt' | itemsPerPage: 5 | filter:search | filter:{data:{ estado : estado}}"  >
							<td>{{record._user.full_name}}</td>
							<td>{{record._user.email}}</td>
							<td>{{record.data.barrio}}</td>
							<td>{{record.data.ciudad}}</td>
							<td>{{record.data.direccion}}</td>
							<td>{{record.createdAt | date:'yyyy-MM-dd hh:mm a'}}</td>
							<td><span class="label" ng-class="record.data.estado == 'Pendiente' ? 'label-danger' : 'label-success'" >{{record.data.estado}}</span></td>
							<td>{{record.metadata.total | currency:"$ "}}</td>
							<td><a href="#/detalle-pedido/{{record._id}}" ui-sref="dashboard.detalle_pedido({pedido: record._id})" class="custom-btn-tiny custom-btn-primary"><i class="glyphicon glyphicon-eye-open"></i></a></td>
							<td><button class="custom-btn-tiny btn-danger" ng-click="delete()"><i class="glyphicon glyphicon-trash"></i></button></td>

						</tr>
					</tbody>
				</table>
				<div class="row">
					<div class="col-lg-12">
						<dir-pagination-controls class="pull-right"></dir-pagination-controls>
					</div>
				</div>
		  </div>
		  <div class="panel-footer">Listado de Pedidos</div>
		</div>
	</div>
</div>
